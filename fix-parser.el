;;; fix-parser.el --- A FIX sequence message parser written in Emacs Lisp for Emacs. -*- lexical-binding: t; -*-

;; Copyright (C) 2025 Dean Seo

;; Author: Dean Seo <deaniac.seo@gmail.com>
;; Maintainer: Dean Seo <deaniac.seo@gmail.com>
;; Created: June 23, 2025
;; Version: 0.1.0
;; Package-Requires: ((emacs "29.3"))
;; Keywords: convenience
;; URL: https://github.com/Deanseo/emacs-fix-parser

;;; Commentary:

;; This package provides a function to parse FIX messages.  If a region is selected, it parses the selected text as a
;; single FIX message.  If no region is selected, it scans the entire buffer for FIX messages and parses each
;; one. Results are displayed as formatted org-mode tables in a new window.  This version fixes the "Invalid
;; regexp" error for whole-buffer parsing.

;;; Code:

(defvar fix-parser/fix-tag-dictionary-4.4
  (let ((dict (make-hash-table :test 'equal)))
    (puthash "1" "Account" dict)
    (puthash "2" "AdvId" dict)
    (puthash "3" "AdvRefID" dict)
    (puthash "4" "AdvSide" dict)
    (puthash "5" "AdvTransType" dict)
    (puthash "6" "AvgPx" dict)
    (puthash "7" "BeginSeqNo" dict)
    (puthash "8" "BeginString" dict)
    (puthash "9" "BodyLength" dict)
    (puthash "10" "CheckSum" dict)
    (puthash "11" "ClOrdID" dict)
    (puthash "12" "Commission" dict)
    (puthash "13" "CommType" dict)
    (puthash "14" "CumQty" dict)
    (puthash "15" "Currency" dict)
    (puthash "16" "EndSeqNo" dict)
    (puthash "17" "ExecID" dict)
    (puthash "18" "ExecInst" dict)
    (puthash "19" "ExecRefID" dict)
    (puthash "20" "ExecTransType" dict)
    (puthash "21" "HandlInst" dict)
    (puthash "22" "SecurityIDSource" dict)
    (puthash "23" "IOIID" dict)
    (puthash "25" "IOIQltyInd" dict)
    (puthash "26" "IOIRefID" dict)
    (puthash "27" "IOIQty" dict)
    (puthash "28" "IOITransType" dict)
    (puthash "29" "LastCapacity" dict)
    (puthash "30" "LastMkt" dict)
    (puthash "31" "LastPx" dict)
    (puthash "32" "LastQty" dict)
    (puthash "33" "NoLinesOfText" dict)
    (puthash "34" "MsgSeqNum" dict)
    (puthash "35" "MsgType" dict)
    (puthash "36" "NewSeqNo" dict)
    (puthash "37" "OrderID" dict)
    (puthash "38" "OrderQty" dict)
    (puthash "39" "OrdStatus" dict)
    (puthash "40" "OrdType" dict)
    (puthash "41" "OrigClOrdID" dict)
    (puthash "42" "OrigTime" dict)
    (puthash "43" "PossDupFlag" dict)
    (puthash "44" "Price" dict)
    (puthash "45" "RefSeqNum" dict)
    (puthash "48" "SecurityID" dict)
    (puthash "49" "SenderCompID" dict)
    (puthash "50" "SenderSubID" dict)
    (puthash "52" "SendingTime" dict)
    (puthash "53" "Quantity" dict)
    (puthash "54" "Side" dict)
    (puthash "55" "Symbol" dict)
    (puthash "56" "TargetCompID" dict)
    (puthash "57" "TargetSubID" dict)
    (puthash "58" "Text" dict)
    (puthash "59" "TimeInForce" dict)
    (puthash "60" "TransactTime" dict)
    (puthash "61" "Urgency" dict)
    (puthash "62" "ValidUntilTime" dict)
    (puthash "63" "SettlmntTyp" dict)
    (puthash "64" "SettlmntDate" dict)
    (puthash "65" "SymbolSfx" dict)
    (puthash "66" "ListID" dict)
    (puthash "67" "ListSeqNo" dict)
    (puthash "68" "TotNoOrders" dict)
    (puthash "69" "ListExecInst" dict)
    (puthash "70" "AllocID" dict)
    (puthash "71" "AllocTransType" dict)
    (puthash "72" "RefAllocID" dict)
    (puthash "73" "NoOrders" dict)
    (puthash "74" "AvgPxPrecision" dict)
    (puthash "75" "TradeDate" dict)
    (puthash "76" "ExecBroker" dict)
    (puthash "77" "OpenClose" dict)
    (puthash "78" "NoAllocs" dict)
    (puthash "79" "AllocAccount" dict)
    (puthash "80" "AllocQty" dict)
    (puthash "81" "ProcessCode" dict)
    (puthash "82" "NoRpts" dict)
    (puthash "83" "RptSeq" dict)
    (puthash "84" "CxlQty" dict)
    (puthash "85" "NoDlvyInst" dict)
    (puthash "87" "AllocStatus" dict)
    (puthash "88" "AllocRejCode" dict)
    (puthash "89" "Signature" dict)
    (puthash "90" "SecureDataLen" dict)
    (puthash "91" "SecureData" dict)
    (puthash "92" "BrokerOfCredit" dict)
    (puthash "93" "SignatureLength" dict)
    (puthash "94" "EmailType" dict)
    (puthash "95" "RawDataLength" dict)
    (puthash "96" "RawData" dict)
    (puthash "97" "PossResend" dict)
    (puthash "98" "EncryptMethod" dict)
    (puthash "99" "StopPx" dict)
    (puthash "100" "ExDestination" dict)
    (puthash "102" "CxlRejReason" dict)
    (puthash "103" "OrdRejReason" dict)
    (puthash "104" "IOIQualifier" dict)
    (puthash "105" "WaveNo" dict)
    (puthash "106" "Issuer" dict)
    (puthash "107" "SecurityDesc" dict)
    (puthash "108" "HeartBtInt" dict)
    (puthash "109" "ClientID" dict)
    (puthash "110" "MinQty" dict)
    (puthash "111" "MaxFloor" dict)
    (puthash "112" "TestReqID" dict)
    (puthash "113" "ReportToExch" dict)
    (puthash "114" "LocateReqd" dict)
    (puthash "115" "OnBehalfOfCompID" dict)
    (puthash "116" "OnBehalfOfSubID" dict)
    (puthash "117" "QuoteID" dict)
    (puthash "118" "NetMoney" dict)
    (puthash "119" "SettlCurrAmt" dict)
    (puthash "120" "SettlCurrency" dict)
    (puthash "121" "ForexReq" dict)
    (puthash "122" "OrigSendingTime" dict)
    (puthash "123" "GapFillFlag" dict)
    (puthash "124" "NoExecs" dict)
    (puthash "126" "ExpireTime" dict)
    (puthash "127" "DKReason" dict)
    (puthash "128" "DeliverToCompID" dict)
    (puthash "129" "DeliverToSubID" dict)
    (puthash "130" "IOINaturalFlag" dict)
    (puthash "131" "QuoteReqID" dict)
    (puthash "132" "BidPx" dict)
    (puthash "133" "OfferPx" dict)
    (puthash "134" "BidSize" dict)
    (puthash "135" "OfferSize" dict)
    (puthash "136" "NoMiscFees" dict)
    (puthash "137" "MiscFeeAmt" dict)
    (puthash "138" "MiscFeeCurr" dict)
    (puthash "139" "MiscFeeType" dict)
    (puthash "140" "PrevClosePx" dict)
    (puthash "141" "ResetSeqNumFlag" dict)
    (puthash "142" "SenderLocationID" dict)
    (puthash "143" "TargetLocationID" dict)
    (puthash "144" "OnBehalfOfLocationID" dict)
    (puthash "145" "DeliverToLocationID" dict)
    (puthash "146" "NoRelatedSym" dict)
    (puthash "147" "Subject" dict)
    (puthash "148" "Headline" dict)
    (puthash "149" "URLLink" dict)
    (puthash "150" "ExecType" dict)
    (puthash "151" "LeavesQty" dict)
    (puthash "152" "CashOrderQty" dict)
    (puthash "153" "AllocAvgPx" dict)
    (puthash "154" "AllocNetMoney" dict)
    (puthash "155" "SettlCurrFxRate" dict)
    (puthash "156" "SettlCurrFxRateCalc" dict)
    (puthash "157" "NumDaysInterest" dict)
    (puthash "158" "AccruedInterestRate" dict)
    (puthash "159" "AccruedInterestAmt" dict)
    (puthash "160" "SettlInstMode" dict)
    (puthash "161" "AllocText" dict)
    (puthash "162" "SettlInstID" dict)
    (puthash "163" "SettlInstTransType" dict)
    (puthash "164" "EmailThreadID" dict)
    (puthash "165" "SettlInstSource" dict)
    (puthash "167" "SecurityType" dict)
    (puthash "168" "EffectiveTime" dict)
    (puthash "169" "StandInstDbType" dict)
    (puthash "170" "StandInstDbName" dict)
    (puthash "171" "StandInstDbID" dict)
    (puthash "188" "BidSpotRate" dict)
    (puthash "189" "BidForwardPoints" dict)
    (puthash "190" "OfferSpotRate" dict)
    (puthash "191" "OfferForwardPoints" dict)
    (puthash "192" "OrderQty2" dict)
    (puthash "193" "SettlDate2" dict)
    (puthash "194" "LastSpotRate" dict)
    (puthash "195" "LastForwardPoints" dict)
    (puthash "196" "AllocLinkID" dict)
    (puthash "197" "AllocLinkType" dict)
    (puthash "198" "SecondaryOrderID" dict)
    (puthash "199" "NoIOIQualifiers" dict)
    (puthash "200" "MaturityMonthYear" dict)
    (puthash "201" "PutOrCall" dict)
    (puthash "202" "StrikePrice" dict)
    (puthash "203" "CoveredOrUncovered" dict)
    (puthash "204" "CustomerOrFirm" dict)
    (puthash "205" "MaturityDay" dict)
    (puthash "206" "OptAttribute" dict)
    (puthash "207" "SecurityExchange" dict)
    (puthash "208" "NotifyBrokerOfCredit" dict)
    (puthash "209" "AllocHandlInst" dict)
    (puthash "210" "MaxShow" dict)
    (puthash "211" "PegOffsetValue" dict)
    (puthash "212" "XmlDataLen" dict)
    (puthash "213" "XmlData" dict)
    (puthash "214" "SettlInstRefID" dict)
    (puthash "215" "NoRoutingIDs" dict)
    (puthash "216" "RoutingType" dict)
    (puthash "217" "RoutingID" dict)
    (puthash "218" "Spread" dict)
    (puthash "219" "Benchmark" dict)
    (puthash "220" "BenchmarkCurveCurrency" dict)
    (puthash "221" "BenchmarkCurveName" dict)
    (puthash "222" "BenchmarkCurvePoint" dict)
    (puthash "223" "CouponRate" dict)
    (puthash "224" "CouponPaymentDate" dict)
    (puthash "225" "IssueDate" dict)
    (puthash "226" "RepurchaseTerm" dict)
    (puthash "227" "RepurchaseRate" dict)
    (puthash "228" "Factor" dict)
    (puthash "229" "TradeOriginationDate" dict)
    (puthash "230" "ExDate" dict)
    (puthash "231" "ContractMultiplier" dict)
    (puthash "232" "NoStipulations" dict)
    (puthash "233" "StipulationType" dict)
    (puthash "234" "StipulationValue" dict)
    (puthash "235" "YieldType" dict)
    (puthash "236" "Yield" dict)
    (puthash "237" "TotalTakedown" dict)
    (puthash "238" "Concession" dict)
    (puthash "239" "RepoCollateralSecurityType" dict)
    (puthash "240" "RedemptionDate" dict)
    (puthash "241" "UnderlyingCouponPaymentDate" dict)
    (puthash "242" "UnderlyingIssueDate" dict)
    (puthash "243" "UnderlyingRepoCollateralSecurityType" dict)
    (puthash "244" "UnderlyingRepurchaseTerm" dict)
    (puthash "245" "UnderlyingRepurchaseRate" dict)
    (puthash "246" "UnderlyingFactor" dict)
    (puthash "247" "UnderlyingRedemptionDate" dict)
    (puthash "248" "LegCouponPaymentDate" dict)
    (puthash "249" "LegIssueDate" dict)
    (puthash "250" "LegRepoCollateralSecurityType" dict)
    (puthash "251" "LegRepurchaseTerm" dict)
    (puthash "252" "LegRepurchaseRate" dict)
    (puthash "253" "LegFactor" dict)
    (puthash "254" "LegRedemptionDate" dict)
    (puthash "255" "CreditRating" dict)
    (puthash "256" "UnderlyingCreditRating" dict)
    (puthash "257" "LegCreditRating" dict)
    (puthash "258" "TradedFlatSwitch" dict)
    (puthash "259" "BasisFeatureDate" dict)
    (puthash "260" "BasisFeaturePrice" dict)
    (puthash "262" "MDReqID" dict)
    (puthash "263" "SubscriptionRequestType" dict)
    (puthash "264" "MarketDepth" dict)
    (puthash "265" "MDUpdateType" dict)
    (puthash "266" "AggregatedBook" dict)
    (puthash "267" "NoMDEntryTypes" dict)
    (puthash "268" "NoMDEntries" dict)
    (puthash "269" "MDEntryType" dict)
    (puthash "270" "MDEntryPx" dict)
    (puthash "271" "MDEntrySize" dict)
    (puthash "272" "MDEntryDate" dict)
    (puthash "273" "MDEntryTime" dict)
    (puthash "274" "TickDirection" dict)
    (puthash "275" "MDMkt" dict)
    (puthash "276" "QuoteCondition" dict)
    (puthash "277" "TradeCondition" dict)
    (puthash "278" "MDEntryID" dict)
    (puthash "279" "MDUpdateAction" dict)
    (puthash "280" "MDEntryRefID" dict)
    (puthash "281" "MDReqRejReason" dict)
    (puthash "282" "MDEntryOriginator" dict)
    (puthash "283" "LocationID" dict)
    (puthash "284" "DeskID" dict)
    (puthash "285" "DeleteReason" dict)
    (puthash "286" "OpenCloseSettleFlag" dict)
    (puthash "287" "SellerDays" dict)
    (puthash "288" "MDEntryBuyer" dict)
    (puthash "289" "MDEntrySeller" dict)
    (puthash "290" "MDEntryPositionNo" dict)
    (puthash "291" "FinancialStatus" dict)
    (puthash "292" "CorporateAction" dict)
    (puthash "293" "DefBidSize" dict)
    (puthash "294" "DefOfferSize" dict)
    (puthash "295" "NoQuoteEntries" dict)
    (puthash "296" "NoQuoteSets" dict)
    (puthash "297" "QuoteStatus" dict)
    (puthash "298" "QuoteCancelType" dict)
    (puthash "299" "QuoteEntryID" dict)
    (puthash "300" "QuoteRejectReason" dict)
    (puthash "301" "QuoteResponseLevel" dict)
    (puthash "302" "QuoteSetID" dict)
    (puthash "303" "QuoteRequestType" dict)
    (puthash "304" "TotNoQuoteEntries" dict)
    (puthash "305" "UnderlyingSecurityIDSource" dict)
    (puthash "306" "UnderlyingIssuer" dict)
    (puthash "307" "UnderlyingSecurityDesc" dict)
    (puthash "308" "UnderlyingSecurityExchange" dict)
    (puthash "309" "UnderlyingSecurityID" dict)
    (puthash "310" "UnderlyingSecurityType" dict)
    (puthash "311" "UnderlyingSymbol" dict)
    (puthash "312" "UnderlyingSymbolSfx" dict)
    (puthash "313" "UnderlyingMaturityMonthYear" dict)
    (puthash "314" "UnderlyingMaturityDay" dict)
    (puthash "315" "UnderlyingPutOrCall" dict)
    (puthash "316" "UnderlyingStrikePrice" dict)
    (puthash "317" "UnderlyingOptAttribute" dict)
    (puthash "318" "UnderlyingCurrency" dict)
    (puthash "320" "SecurityReqID" dict)
    (puthash "321" "SecurityRequestType" dict)
    (puthash "322" "SecurityResponseID" dict)
    (puthash "323" "SecurityResponseType" dict)
    (puthash "324" "SecurityStatusReqID" dict)
    (puthash "325" "UnsolicitedIndicator" dict)
    (puthash "326" "SecurityTradingStatus" dict)
    (puthash "327" "HaltReason" dict)
    (puthash "328" "InViewOfCommon" dict)
    (puthash "329" "DueToRelated" dict)
    (puthash "330" "BuyVolume" dict)
    (puthash "331" "SellVolume" dict)
    (puthash "332" "HighPx" dict)
    (puthash "333" "LowPx" dict)
    (puthash "334" "Adjustment" dict)
    (puthash "335" "TradSesReqID" dict)
    (puthash "336" "TradingSessionID" dict)
    (puthash "337" "ContraTrader" dict)
    (puthash "338" "TradSesMethod" dict)
    (puthash "339" "TradSesMode" dict)
    (puthash "340" "TradSesStatus" dict)
    (puthash "341" "TradSesStartTime" dict)
    (puthash "342" "TradSesOpenTime" dict)
    (puthash "343" "TradSesPreCloseTime" dict)
    (puthash "344" "TradSesCloseTime" dict)
    (puthash "345" "TradSesEndTime" dict)
    (puthash "346" "NumberOfOrders" dict)
    (puthash "347" "MessageEncoding" dict)
    (puthash "348" "EncodedIssuerLen" dict)
    (puthash "349" "EncodedIssuer" dict)
    (puthash "350" "EncodedSecurityDescLen" dict)
    (puthash "351" "EncodedSecurityDesc" dict)
    (puthash "352" "EncodedListExecInstLen" dict)
    (puthash "353" "EncodedListExecInst" dict)
    (puthash "354" "EncodedTextLen" dict)
    (puthash "355" "EncodedText" dict)
    (puthash "356" "EncodedSubjectLen" dict)
    (puthash "357" "EncodedSubject" dict)
    (puthash "358" "EncodedHeadlineLen" dict)
    (puthash "359" "EncodedHeadline" dict)
    (puthash "360" "EncodedAllocTextLen" dict)
    (puthash "361" "EncodedAllocText" dict)
    (puthash "362" "EncodedUnderlyingIssuerLen" dict)
    (puthash "363" "EncodedUnderlyingIssuer" dict)
    (puthash "364" "EncodedUnderlyingSecurityDescLen" dict)
    (puthash "365" "EncodedUnderlyingSecurityDesc" dict)
    (puthash "366" "AllocPrice" dict)
    (puthash "367" "QuoteSetValidUntilTime" dict)
    (puthash "368" "QuoteEntryRejectReason" dict)
    (puthash "369" "LastMsgSeqNumProcessed" dict)
    (puthash "371" "RefTagID" dict)
    (puthash "372" "RefMsgType" dict)
    (puthash "373" "SessionRejectReason" dict)
    (puthash "374" "BidRequestTransType" dict)
    (puthash "375" "ContraBroker" dict)
    (puthash "376" "ComplianceID" dict)
    (puthash "377" "SolicitedFlag" dict)
    (puthash "378" "ExecRestatementReason" dict)
    (puthash "379" "BusinessRejectRefID" dict)
    (puthash "380" "BusinessRejectReason" dict)
    (puthash "381" "GrossTradeAmt" dict)
    (puthash "382" "NoContraBrokers" dict)
    (puthash "383" "MaxMessageSize" dict)
    (puthash "384" "NoMsgTypes" dict)
    (puthash "385" "MsgDirection" dict)
    (puthash "386" "NoTradingSessions" dict)
    (puthash "387" "TotalVolumeTraded" dict)
    (puthash "388" "DiscretionInst" dict)
    (puthash "389" "DiscretionOffsetValue" dict)
    (puthash "390" "BidID" dict)
    (puthash "391" "ClientBidID" dict)
    (puthash "392" "ListName" dict)
    (puthash "393" "TotNoRelatedSym" dict)
    (puthash "394" "BidType" dict)
    (puthash "395" "NumTickets" dict)
    (puthash "396" "SideValue1" dict)
    (puthash "397" "SideValue2" dict)
    (puthash "398" "NoBidDescriptors" dict)
    (puthash "399" "BidDescriptorType" dict)
    (puthash "400" "BidDescriptor" dict)
    (puthash "401" "SideValueInd" dict)
    (puthash "402" "LiquidityPctLow" dict)
    (puthash "403" "LiquidityPctHigh" dict)
    (puthash "404" "LiquidityValue" dict)
    (puthash "405" "EFPTrackingError" dict)
    (puthash "406" "FairValue" dict)
    (puthash "407" "OutsideIndexPct" dict)
    (puthash "408" "ValueOfFutures" dict)
    (puthash "409" "LiquidityIndType" dict)
    (puthash "410" "WtAverageLiquidity" dict)
    (puthash "411" "ExchangeForPhysical" dict)
    (puthash "412" "OutMainCntryUIndex" dict)
    (puthash "413" "CrossPercent" dict)
    (puthash "414" "ProgRptReqs" dict)
    (puthash "415" "ProgPeriodInterval" dict)
    (puthash "416" "IncTaxInd" dict)
    (puthash "417" "NumBidders" dict)
    (puthash "418" "BidTradeType" dict)
    (puthash "419" "BasisPxType" dict)
    (puthash "420" "NoBidComponents" dict)
    (puthash "421" "Country" dict)
    (puthash "422" "TotNoStrikes" dict)
    (puthash "423" "PriceType" dict)
    (puthash "424" "DayOrderQty" dict)
    (puthash "425" "DayCumQty" dict)
    (puthash "426" "DayAvgPx" dict)
    (puthash "427" "GTBookingInst" dict)
    (puthash "428" "NoStrikes" dict)
    (puthash "429" "ListStatusType" dict)
    (puthash "430" "NetGrossInd" dict)
    (puthash "431" "ListOrderStatus" dict)
    (puthash "432" "ExpireDate" dict)
    (puthash "433" "ListExecInstType" dict)
    (puthash "434" "CxlRejResponseTo" dict)
    (puthash "435" "UnderlyingCouponRate" dict)
    (puthash "436" "UnderlyingContractMultiplier" dict)
    (puthash "437" "ContraTradeQty" dict)
    (puthash "438" "ContraTradeTime" dict)
    (puthash "439" "ClearingFirm" dict)
    (puthash "440" "ClearingAccount" dict)
    (puthash "441" "LiquidityNumSecurities" dict)
    (puthash "442" "MultiLegReportingType" dict)
    (puthash "443" "StrikeTime" dict)
    (puthash "444" "ListStatusText" dict)
    (puthash "445" "EncodedListStatusTextLen" dict)
    (puthash "446" "EncodedListStatusText" dict)
    (puthash "447" "PartyIDSource" dict)
    (puthash "448" "PartyID" dict)
    (puthash "451" "NetChgPrevDay" dict)
    (puthash "452" "PartyRole" dict)
    (puthash "453" "NoPartyIDs" dict)
    (puthash "454" "NoSecurityAltID" dict)
    (puthash "455" "SecurityAltID" dict)
    (puthash "456" "SecurityAltIDSource" dict)
    (puthash "457" "NoUnderlyingSecurityAltID" dict)
    (puthash "458" "UnderlyingSecurityAltID" dict)
    (puthash "459" "UnderlyingSecurityAltIDSource" dict)
    (puthash "460" "Product" dict)
    (puthash "461" "CFICode" dict)
    (puthash "462" "UnderlyingProduct" dict)
    (puthash "463" "UnderlyingCFICode" dict)
    (puthash "464" "TestMessageIndicator" dict)
    (puthash "466" "BookingRefID" dict)
    (puthash "467" "IndividualAllocID" dict)
    (puthash "468" "RoundingDirection" dict)
    (puthash "469" "RoundingModulus" dict)
    (puthash "470" "CountryOfIssue" dict)
    (puthash "471" "StateOrProvinceOfIssue" dict)
    (puthash "472" "LocaleOfIssue" dict)
    (puthash "473" "NoRegistDtls" dict)
    (puthash "474" "MailingDtls" dict)
    (puthash "475" "InvestorCountryOfResidence" dict)
    (puthash "476" "PaymentRef" dict)
    (puthash "477" "DistribPaymentMethod" dict)
    (puthash "478" "CashDistribCurr" dict)
    (puthash "479" "CommCurrency" dict)
    (puthash "480" "CancellationRights" dict)
    (puthash "481" "MoneyLaunderingStatus" dict)
    (puthash "482" "MailingInst" dict)
    (puthash "483" "TransBkdTime" dict)
    (puthash "484" "ExecPriceType" dict)
    (puthash "485" "ExecPriceAdjustment" dict)
    (puthash "486" "DateOfBirth" dict)
    (puthash "487" "TradeReportTransType" dict)
    (puthash "488" "CardHolderName" dict)
    (puthash "489" "CardNumber" dict)
    (puthash "490" "CardExpDate" dict)
    (puthash "491" "CardIssNum" dict)
    (puthash "492" "PaymentMethod" dict)
    (puthash "493" "RegistAcctType" dict)
    (puthash "494" "Designation" dict)
    (puthash "495" "TaxAdvantageType" dict)
    (puthash "496" "RegistRejReasonText" dict)
    (puthash "497" "FundRenewWaiv" dict)
    (puthash "498" "CashDistribAgentName" dict)
    (puthash "499" "CashDistribAgentCode" dict)
    (puthash "500" "CashDistribAgentAcctNumber" dict)
    (puthash "501" "CashDistribPayRef" dict)
    (puthash "502" "CashDistribAgentAcctName" dict)
    (puthash "503" "CardStartDate" dict)
    (puthash "504" "PaymentDate" dict)
    (puthash "505" "PaymentRemitterID" dict)
    (puthash "506" "RegistStatus" dict)
    (puthash "507" "RegistRejReasonCode" dict)
    (puthash "508" "RegistRefID" dict)
    (puthash "509" "RegistDtls" dict)
    (puthash "510" "NoDistribInsts" dict)
    (puthash "511" "RegistEmail" dict)
    (puthash "512" "DistribPercentage" dict)
    (puthash "513" "RegistID" dict)
    (puthash "514" "RegistTransType" dict)
    (puthash "515" "ExecValuationPoint" dict)
    (puthash "516" "OrderPercent" dict)
    (puthash "517" "OwnershipType" dict)
    (puthash "518" "NoContAmts" dict)
    (puthash "519" "ContAmtType" dict)
    (puthash "520" "ContAmtValue" dict)
    (puthash "521" "ContAmtCurr" dict)
    (puthash "522" "OwnerType" dict)
    (puthash "523" "PartySubID" dict)
    (puthash "524" "NestedPartyID" dict)
    (puthash "525" "NestedPartyIDSource" dict)
    (puthash "526" "SecondaryClOrdID" dict)
    (puthash "527" "SecondaryExecID" dict)
    (puthash "528" "OrderCapacity" dict)
    (puthash "529" "OrderRestrictions" dict)
    (puthash "530" "MassCancelRequestType" dict)
    (puthash "531" "MassCancelResponse" dict)
    (puthash "532" "MassCancelRejectReason" dict)
    (puthash "533" "TotalAffectedOrders" dict)
    (puthash "534" "NoAffectedOrders" dict)
    (puthash "535" "AffectedOrderID" dict)
    (puthash "536" "AffectedSecondaryOrderID" dict)
    (puthash "537" "QuoteType" dict)
    (puthash "538" "NestedPartyRole" dict)
    (puthash "539" "NoNestedPartyIDs" dict)
    (puthash "540" "TotalAccruedInterestAmt" dict)
    (puthash "541" "MaturityDate" dict)
    (puthash "542" "UnderlyingMaturityDate" dict)
    (puthash "543" "InstrRegistry" dict)
    (puthash "544" "CashMargin" dict)
    (puthash "545" "NestedPartySubID" dict)
    (puthash "546" "Scope" dict)
    (puthash "547" "MDImplicitDelete" dict)
    (puthash "548" "CrossID" dict)
    (puthash "549" "CrossType" dict)
    (puthash "550" "CrossPrioritization" dict)
    (puthash "551" "OrigCrossID" dict)
    (puthash "552" "NoSides" dict)
    (puthash "553" "Username" dict)
    (puthash "554" "Password" dict)
    (puthash "555" "NoLegs" dict)
    (puthash "556" "LegCurrency" dict)
    (puthash "557" "TotNoSecurityTypes" dict)
    (puthash "558" "NoSecurityTypes" dict)
    (puthash "559" "SecurityListRequestType" dict)
    (puthash "560" "SecurityRequestResult" dict)
    (puthash "561" "RoundLot" dict)
    (puthash "562" "MinTradeVol" dict)
    (puthash "563" "MultiLegRptTypeReq" dict)
    (puthash "564" "LegPositionEffect" dict)
    (puthash "565" "LegCoveredOrUncovered" dict)
    (puthash "566" "LegPrice" dict)
    (puthash "567" "TradSesStatusRejReason" dict)
    (puthash "568" "TradeRequestID" dict)
    (puthash "569" "TradeRequestType" dict)
    (puthash "570" "PreviouslyReported" dict)
    (puthash "571" "TradeReportID" dict)
    (puthash "572" "TradeReportRefID" dict)
    (puthash "573" "MatchStatus" dict)
    (puthash "574" "MatchType" dict)
    (puthash "575" "OddLot" dict)
    (puthash "576" "NoClearingInstructions" dict)
    (puthash "577" "ClearingInstruction" dict)
    (puthash "578" "TradeInputSource" dict)
    (puthash "579" "TradeInputDevice" dict)
    (puthash "580" "NoDates" dict)
    (puthash "581" "AccountType" dict)
    (puthash "582" "CustOrderCapacity" dict)
    (puthash "583" "ClOrdLinkID" dict)
    (puthash "584" "MassStatusReqID" dict)
    (puthash "585" "MassStatusReqType" dict)
    (puthash "586" "OrigOrdModTime" dict)
    (puthash "587" "LegSettlmntTyp" dict)
    (puthash "588" "LegSettlmntDate" dict)
    (puthash "589" "DayBookingInst" dict)
    (puthash "590" "BookingUnit" dict)
    (puthash "591" "PreallocMethod" dict)
    (puthash "592" "UnderlyingCountryOfIssue" dict)
    (puthash "593" "UnderlyingStateOrProvinceOfIssue" dict)
    (puthash "594" "UnderlyingLocaleOfIssue" dict)
    (puthash "595" "UnderlyingInstrRegistry" dict)
    (puthash "596" "LegCountryOfIssue" dict)
    (puthash "597" "LegStateOrProvinceOfIssue" dict)
    (puthash "598" "LegLocaleOfIssue" dict)
    (puthash "599" "LegInstrRegistry" dict)
    (puthash "600" "LegSymbol" dict)
    (puthash "601" "LegSymbolSfx" dict)
    (puthash "602" "LegSecurityID" dict)
    (puthash "603" "LegSecurityIDSource" dict)
    (puthash "604" "NoLegSecurityAltID" dict)
    (puthash "605" "LegSecurityAltID" dict)
    (puthash "606" "LegSecurityAltIDSource" dict)
    (puthash "607" "LegProduct" dict)
    (puthash "608" "LegCFICode" dict)
    (puthash "609" "LegSecurityType" dict)
    (puthash "610" "LegMaturityMonthYear" dict)
    (puthash "611" "LegMaturityDate" dict)
    (puthash "612" "LegStrikePrice" dict)
    (puthash "613" "LegOptAttribute" dict)
    (puthash "614" "LegContractMultiplier" dict)
    (puthash "615" "LegCouponRate" dict)
    (puthash "616" "LegSecurityExchange" dict)
    (puthash "617" "LegIssuer" dict)
    (puthash "618" "EncodedLegIssuerLen" dict)
    (puthash "619" "EncodedLegIssuer" dict)
    (puthash "620" "LegSecurityDesc" dict)
    (puthash "621" "EncodedLegSecurityDescLen" dict)
    (puthash "622" "EncodedLegSecurityDesc" dict)
    (puthash "623" "LegRatioQty" dict)
    (puthash "624" "LegSide" dict)
    (puthash "625" "TradingSessionSubID" dict)
    (puthash "626" "AllocType" dict)
    (puthash "627" "NoHops" dict)
    (puthash "628" "HopCompID" dict)
    (puthash "629" "HopSendingTime" dict)
    (puthash "630" "HopRefID" dict)
    (puthash "631" "MidPx" dict)
    (puthash "632" "BidYield" dict)
    (puthash "633" "MidYield" dict)
    (puthash "634" "OfferYield" dict)
    (puthash "635" "ClearingFeeIndicator" dict)
    (puthash "636" "WorkingIndicator" dict)
    (puthash "637" "LegLastPx" dict)
    (puthash "638" "PriorityIndicator" dict)
    (puthash "639" "PriceImprovement" dict)
    (puthash "640" "Price2" dict)
    (puthash "641" "LastForwardPoints2" dict)
    (puthash "642" "BidForwardPoints2" dict)
    (puthash "643" "OfferForwardPoints2" dict)
    (puthash "644" "RFQReqID" dict)
    (puthash "645" "MktBidPx" dict)
    (puthash "646" "MktOfferPx" dict)
    (puthash "647" "MinBidSize" dict)
    (puthash "648" "MinOfferSize" dict)
    (puthash "649" "QuoteStatusReqID" dict)
    (puthash "650" "LegalConfirm" dict)
    (puthash "651" "UnderlyingLastPx" dict)
    (puthash "652" "UnderlyingLastQty" dict)
    (puthash "653" "SecDefStatus" dict)
    (puthash "654" "LegRefID" dict)
    (puthash "655" "ContraLegRefID" dict)
    (puthash "656" "SettlCurrBidFxRate" dict)
    (puthash "657" "SettlCurrOfferFxRate" dict)
    (puthash "658" "QuoteRequestRejectReason" dict)
    (puthash "659" "SideComplianceID" dict)
    (puthash "660" "AcctIDSource" dict)
    (puthash "661" "AllocAcctIDSource" dict)
    (puthash "662" "BenchmarkPrice" dict)
    (puthash "663" "BenchmarkPriceType" dict)
    (puthash "664" "ConfirmID" dict)
    (puthash "665" "ConfirmStatus" dict)
    (puthash "666" "ConfirmTransType" dict)
    (puthash "667" "ContractSettlMonth" dict)
    (puthash "668" "DeliveryForm" dict)
    (puthash "669" "LastParPx" dict)
    (puthash "670" "NoLegAllocs" dict)
    (puthash "671" "LegAllocAccount" dict)
    (puthash "672" "LegIndividualAllocID" dict)
    (puthash "673" "LegAllocQty" dict)
    (puthash "674" "LegAllocAcctIDSource" dict)
    (puthash "675" "LegSettlCurrency" dict)
    (puthash "676" "LegBenchmarkCurveCurrency" dict)
    (puthash "677" "LegBenchmarkCurveName" dict)
    (puthash "678" "LegBenchmarkCurvePoint" dict)
    (puthash "679" "LegBenchmarkPrice" dict)
    (puthash "680" "LegBenchmarkPriceType" dict)
    (puthash "681" "LegBidPx" dict)
    (puthash "682" "LegIOIQty" dict)
    (puthash "683" "NoLegStipulations" dict)
    (puthash "684" "LegOfferPx" dict)
    (puthash "685" "LegOrderQty" dict)
    (puthash "686" "LegPriceType" dict)
    (puthash "687" "LegQty" dict)
    (puthash "688" "LegStipulationType" dict)
    (puthash "689" "LegStipulationValue" dict)
    (puthash "690" "LegSwapType" dict)
    (puthash "691" "Pool" dict)
    (puthash "692" "QuotePriceType" dict)
    (puthash "693" "QuoteRespID" dict)
    (puthash "694" "QuoteRespType" dict)
    (puthash "695" "QuoteQualifier" dict)
    (puthash "696" "YieldRedemptionDate" dict)
    (puthash "697" "YieldRedemptionPrice" dict)
    (puthash "698" "YieldRedemptionPriceType" dict)
    (puthash "699" "BenchmarkSecurityID" dict)
    (puthash "700" "ReversalIndicator" dict)
    (puthash "701" "YieldCalcDate" dict)
    (puthash "702" "NoPositions" dict)
    (puthash "703" "PosType" dict)
    (puthash "704" "LongQty" dict)
    (puthash "705" "ShortQty" dict)
    (puthash "706" "PosQtyStatus" dict)
    (puthash "707" "PosAmtType" dict)
    (puthash "708" "PosAmt" dict)
    (puthash "709" "PosTransType" dict)
    (puthash "710" "PosReqID" dict)
    (puthash "711" "NoUnderlyings" dict)
    (puthash "712" "PosMaintAction" dict)
    (puthash "713" "OrigPosReqRefID" dict)
    (puthash "714" "PosMaintRptRefID" dict)
    (puthash "715" "ClearingBusinessDate" dict)
    (puthash "716" "SettlSessID" dict)
    (puthash "717" "SettlSessSubID" dict)
    (puthash "718" "AdjustmentType" dict)
    (puthash "719" "ContraryInstructionIndicator" dict)
    (puthash "720" "PriorSpreadIndicator" dict)
    (puthash "721" "PosMaintRptID" dict)
    (puthash "722" "PosMaintStatus" dict)
    (puthash "723" "PosMaintResult" dict)
    (puthash "724" "PosReqType" dict)
    (puthash "725" "ResponseTransportType" dict)
    (puthash "726" "ResponseDestination" dict)
    (puthash "727" "TotalNumPosReports" dict)
    (puthash "728" "PosReqResult" dict)
    (puthash "729" "PosReqStatus" dict)
    (puthash "730" "SettlPrice" dict)
    (puthash "731" "SettlPriceType" dict)
    (puthash "732" "UnderlyingSettlPrice" dict)
    (puthash "733" "UnderlyingSettlPriceType" dict)
    (puthash "734" "PriorSettlPrice" dict)
    (puthash "735" "NoQuoteQualifiers" dict)
    (puthash "736" "AllocSettlCurrency" dict)
    (puthash "737" "AllocSettlCurrAmt" dict)
    (puthash "738" "InterestAtMaturity" dict)
    (puthash "739" "LegDatedDate" dict)
    (puthash "740" "LegPool" dict)
    (puthash "741" "AllocInterestAtMaturity" dict)
    (puthash "742" "AllocAccruedInterestAmt" dict)
    (puthash "743" "DeliveryDate" dict)
    (puthash "744" "AssignmentMethod" dict)
    (puthash "745" "AssignmentUnit" dict)
    (puthash "746" "OpenInterest" dict)
    (puthash "747" "ExerciseMethod" dict)
    (puthash "748" "TotNumTradeReports" dict)
    (puthash "749" "TradeRequestResult" dict)
    (puthash "750" "TradeRequestStatus" dict)
    (puthash "751" "TradeReportRejectReason" dict)
    (puthash "752" "SideMultiLegReportingType" dict)
    (puthash "753" "NoPosAmt" dict)
    (puthash "754" "AutoAcceptIndicator" dict)
    (puthash "755" "AllocReportID" dict)
    (puthash "756" "NoNested2PartyIDs" dict)
    (puthash "757" "Nested2PartyID" dict)
    (puthash "758" "Nested2PartyIDSource" dict)
    (puthash "759" "Nested2PartyRole" dict)
    (puthash "760" "Nested2PartySubID" dict)
    (puthash "761" "BenchmarkSecurityIDSource" dict)
    (puthash "762" "SecuritySubType" dict)
    (puthash "763" "UnderlyingSecuritySubType" dict)
    (puthash "764" "LegSecuritySubType" dict)
    (puthash "765" "AllowableOneSidednessPct" dict)
    (puthash "766" "AllowableOneSidednessValue" dict)
    (puthash "767" "AllowableOneSidednessCurr" dict)
    (puthash "768" "NoTrdRegTimestamps" dict)
    (puthash "769" "TrdRegTimestamp" dict)
    (puthash "770" "TrdRegTimestampType" dict)
    (puthash "771" "TrdRegTimestampOrigin" dict)
    (puthash "772" "ConfirmRefID" dict)
    (puthash "773" "ConfirmType" dict)
    (puthash "774" "ConfirmRejReason" dict)
    (puthash "775" "BookingType" dict)
    (puthash "776" "IndividualAllocRejCode" dict)
    (puthash "777" "SettlInstMsgID" dict)
    (puthash "778" "NoSettlInst" dict)
    (puthash "779" "LastUpdateTime" dict)
    (puthash "780" "AllocSettlInstType" dict)
    (puthash "781" "NoSettlPartyIDs" dict)
    (puthash "782" "SettlPartyID" dict)
    (puthash "783" "SettlPartyIDSource" dict)
    (puthash "784" "SettlPartyRole" dict)
    (puthash "785" "SettlPartySubID" dict)
    (puthash "786" "SettlPartySubIDType" dict)
    (puthash "787" "DlvyInstType" dict)
    (puthash "788" "TerminationType" dict)
    (puthash "789" "NextExpectedMsgSeqNum" dict)
    (puthash "790" "OrdStatusReqID" dict)
    (puthash "791" "SettlInstReqID" dict)
    (puthash "792" "SettlInstReqRejCode" dict)
    (puthash "793" "SecondaryAllocID" dict)
    (puthash "794" "AllocReportType" dict)
    (puthash "795" "AllocReportRefID" dict)
    (puthash "796" "AllocCancReplaceReason" dict)
    (puthash "797" "CopyMsgIndicator" dict)
    (puthash "798" "AllocAccountType" dict)
    (puthash "799" "OrderAvgPx" dict)
    (puthash "800" "OrderBookingQty" dict)
    (puthash "801" "NoSettlPartySubIDs" dict)
    (puthash "802" "NoPartySubIDs" dict)
    (puthash "803" "PartySubIDType" dict)
    (puthash "804" "NoNestedPartySubIDs" dict)
    (puthash "805" "NestedPartySubIDType" dict)
    (puthash "806" "NoNested2PartySubIDs" dict)
    (puthash "807" "Nested2PartySubIDType" dict)
    (puthash "808" "AllocIntermedReqType" dict)
    (puthash "810" "UnderlyingPx" dict)
    (puthash "811" "PriceDelta" dict)
    (puthash "812" "ApplQueueMax" dict)
    (puthash "813" "ApplQueueDepth" dict)
    (puthash "814" "ApplQueueResolution" dict)
    (puthash "815" "ApplQueueAction" dict)
    (puthash "816" "NoApplIDs" dict)
    (puthash "817" "ApplID" dict)
    (puthash "818" "ApplSeqNum" dict)
    (puthash "819" "ApplLastSeqNum" dict)
    (puthash "820" "ApplResendFlag" dict)
    (puthash "821" "ApplReportID" dict)
    (puthash "822" "OnBehalfOfSendingTime" dict)
    (puthash "823" "LastPx" dict)
    (puthash "824" "NoLegRefIDs" dict)
    (puthash "825" "LegRefID" dict)
    (puthash "826" "LegPrice" dict)
    (puthash "827" "LegForwardPoints" dict)
    (puthash "828" "TradSesReqID" dict)
    (puthash "829" "LegStipulationType" dict)
    (puthash "830" "LegStipulationValue" dict)
    (puthash "831" "NoLegStipulations" dict)
    (puthash "832" "LegOptionRatio" dict)
    (puthash "833" "NoLegs" dict)
    (puthash "834" "LegSymbol" dict)
    (puthash "835" "LegSide" dict)
    (puthash "836" "LegCurrency" dict)
    (puthash "837" "LegSecurityID" dict)
    (puthash "838" "LegSecurityIDSource" dict)
    (puthash "839" "NoLegSecurityAltID" dict)
    (puthash "840" "LegSecurityAltID" dict)
    (puthash "841" "LegSecurityAltIDSource" dict)
    (puthash "842" "LegProduct" dict)
    (puthash "843" "LegCFICode" dict)
    (puthash "844" "LegSecurityType" dict)
    (puthash "845" "LegMaturityMonthYear" dict)
    (puthash "846" "LegMaturityDate" dict)
    (puthash "847" "LegStrikePrice" dict)
    (puthash "848" "LegOptAttribute" dict)
    (puthash "849" "LegContractMultiplier" dict)
    (puthash "850" "LegCouponRate" dict)
    (puthash "851" "LegSecurityExchange" dict)
    (puthash "852" "LegIssuer" dict)
    (puthash "853" "EncodedLegIssuerLen" dict)
    (puthash "854" "EncodedLegIssuer" dict)
    (puthash "855" "LegSecurityDesc" dict)
    (puthash "856" "EncodedLegSecurityDescLen" dict)
    (puthash "857" "EncodedLegSecurityDesc" dict)
    (puthash "858" "LegRatioQty" dict)
    (puthash "859" "LegRefID" dict)
    (puthash "860" "LegPrice" dict)
    (puthash "861" "LegQty" dict)
    (puthash "862" "NoLegAllocs" dict)
    (puthash "863" "LegAllocAccount" dict)
    (puthash "864" "LegAllocAcctIDSource" dict)
    (puthash "865" "LegAllocQty" dict)
    (puthash "866" "LegAllocID" dict)
    (puthash "867" "LegAllocText" dict)
    (puthash "868" "LegAllocStatus" dict)
    (puthash "869" "LegAllocRejCode" dict)
    (puthash "870" "LegPositionEffect" dict)
    (puthash "871" "LegCoveredOrUncovered" dict)
    (puthash "872" "LegSettlType" dict)
    (puthash "873" "LegSettlDate" dict)
    (puthash "874" "LegLastPx" dict)
    (puthash "875" "LegOrderQty" dict)
    (puthash "876" "LegIOIQty" dict)
    (puthash "877" "LegBidPx" dict)
    (puthash "878" "LegOfferPx" dict)
    (puthash "879" "LegForwardPoints" dict)
    (puthash "880" "LegSwapType" dict)
    (puthash "881" "LegPool" dict)
    (puthash "882" "LegDatedDate" dict)
    (puthash "883" "LegCountryOfIssue" dict)
    (puthash "884" "LegStateOrProvinceOfIssue" dict)
    (puthash "885" "LegLocaleOfIssue" dict)
    (puthash "886" "LegInstrRegistry" dict)
    (puthash "887" "LegBenchmarkCurveCurrency" dict)
    (puthash "888" "LegBenchmarkCurveName" dict)
    (puthash "889" "LegBenchmarkCurvePoint" dict)
    (puthash "890" "LegBenchmarkPrice" dict)
    (puthash "891" "LegBenchmarkPriceType" dict)
    (puthash "892" "LegSettlCurrency" dict)
    (puthash "893" "LegPriceType" dict)
    (puthash "894" "LegOptionRatio" dict)
    (puthash "895" "LegLastForwardPoints" dict)
    (puthash "896" "LegCalculatedCcyLastQty" dict)
    (puthash "897" "LegGrossTradeAmt" dict)
    (puthash "898" "LegNumber" dict)
    (puthash "899" "LegLastQty" dict)
    (puthash "900" "LegVolatility" dict)
    (puthash "901" "LegDividendYield" dict)
    (puthash "902" "LegCurrencyRatio" dict)
    (puthash "903" "LegLastPx" dict)
    (puthash "904" "LegPrice" dict)
    (puthash "905" "LegQty" dict)
    (puthash "906" "LegSide" dict)
    (puthash "907" "LegSettlDate" dict)
    (puthash "908" "LegSettlType" dict)
    (puthash "909" "LegLastForwardPoints" dict)
    (puthash "910" "LegCalculatedCcyLastQty" dict)
    (puthash "911" "LegGrossTradeAmt" dict)
    (puthash "912" "LegNumber" dict)
    (puthash "913" "LegLastQty" dict)
    (puthash "914" "LegVolatility" dict)
    (puthash "915" "LegDividendYield" dict)
    (puthash "916" "LegCurrencyRatio" dict)
    (puthash "917" "LegLastPx" dict)
    (puthash "918" "LegPrice" dict)
    (puthash "919" "LegQty" dict)
    (puthash "920" "LegSide" dict)
    (puthash "921" "LegSettlDate" dict)
    (puthash "922" "LegSettlType" dict)
    (puthash "923" "LegLastForwardPoints" dict)
    (puthash "924" "LegCalculatedCcyLastQty" dict)
    (puthash "925" "LegGrossTradeAmt" dict)
    (puthash "926" "LegNumber" dict)
    (puthash "927" "LegLastQty" dict)
    (puthash "928" "LegVolatility" dict)
    (puthash "929" "LegDividendYield" dict)
    (puthash "930" "LegCurrencyRatio" dict)
    (puthash "931" "LegLastPx" dict)
    (puthash "932" "LegPrice" dict)
    (puthash "933" "LegQty" dict)
    (puthash "934" "LegSide" dict)
    (puthash "935" "LegSettlDate" dict)
    (puthash "936" "LegSettlType" dict)
    (puthash "937" "LegLastForwardPoints" dict)
    (puthash "938" "LegCalculatedCcyLastQty" dict)
    (puthash "939" "LegGrossTradeAmt" dict)
    (puthash "940" "LegNumber" dict)
    (puthash "941" "LegLastQty" dict)
    (puthash "942" "LegVolatility" dict)
    (puthash "943" "LegDividendYield" dict)
    (puthash "944" "LegCurrencyRatio" dict)
    (puthash "945" "LegLastPx" dict)
    (puthash "946" "LegPrice" dict)
    (puthash "947" "LegQty" dict)
    (puthash "948" "LegSide" dict)
    (puthash "949" "LegSettlDate" dict)
    (puthash "950" "LegSettlType" dict)
    (puthash "951" "LegLastForwardPoints" dict)
    (puthash "952" "LegCalculatedCcyLastQty" dict)
    (puthash "953" "LegGrossTradeAmt" dict)
    (puthash "954" "LegNumber" dict)
    (puthash "955" "LegLastQty" dict)
    (puthash "956" "LegVolatility" dict)
    (puthash "957" "LegDividendYield" dict)
    (puthash "958" "LegCurrencyRatio" dict)
    (puthash "959" "LegLastPx" dict)
    (puthash "960" "LegPrice" dict)
    (puthash "961" "LegQty" dict)
    (puthash "962" "LegSide" dict)
    (puthash "963" "LegSettlDate" dict)
    (puthash "964" "LegSettlType" dict)
    (puthash "965" "LegLastForwardPoints" dict)
    (puthash "966" "LegCalculatedCcyLastQty" dict)
    (puthash "967" "LegGrossTradeAmt" dict)
    (puthash "968" "LegNumber" dict)
    (puthash "969" "LegLastQty" dict)
    (puthash "970" "LegVolatility" dict)
    (puthash "971" "LegDividendYield" dict)
    (puthash "972" "LegCurrencyRatio" dict)
    (puthash "973" "LegLastPx" dict)
    (puthash "974" "LegPrice" dict)
    (puthash "975" "LegQty" dict)
    (puthash "976" "LegSide" dict)
    (puthash "977" "LegSettlDate" dict)
    (puthash "978" "LegSettlType" dict)
    (puthash "979" "LegLastForwardPoints" dict)
    (puthash "980" "LegCalculatedCcyLastQty" dict)
    (puthash "981" "LegGrossTradeAmt" dict)
    (puthash "982" "LegNumber" dict)
    (puthash "983" "LegLastQty" dict)
    (puthash "984" "LegVolatility" dict)
    (puthash "985" "LegDividendYield" dict)
    (puthash "986" "LegCurrencyRatio" dict)
    (puthash "987" "LegLastPx" dict)
    (puthash "988" "LegPrice" dict)
    (puthash "989" "LegQty" dict)
    (puthash "990" "LegSide" dict)
    (puthash "991" "LegSettlDate" dict)
    (puthash "992" "LegSettlType" dict)
    (puthash "993" "LegLastForwardPoints" dict)
    (puthash "994" "LegCalculatedCcyLastQty" dict)
    (puthash "995" "LegGrossTradeAmt" dict)
    (puthash "996" "LegLastQty" dict)
    (puthash "997" "LegVolatility" dict)
    (puthash "998" "LegDividendYield" dict)
    (puthash "999" "LegCurrencyRatio" dict)
    (puthash "1000" "UnderlyingLegSymbol" dict)
    (puthash "6000" "CustomTag" dict)
    dict)
  "A hash table mapping FIX 4.4 tag numbers (as strings) to their names.")

(defun fix-parser/my-pad-string-right (str width)
  "Pad STR with spaces on the right to reach a total of WIDTH characters."
  (let* ((len (length str))
         (padding-needed (- width len)))
    (if (> padding-needed 0)
        (concat str (make-string padding-needed ?\s))
      str)))

(defun fix-parser/parse-fix--to-table-string (raw-message)
  "Attempt to parse a single RAW-MESSAGE string.  If the message is valid, return a string containing the
formatted org-mode table. If it's invalid, return nil."
  (let* ((trimmed-message (string-trim raw-message))
         (parsed-data '())
         (col1-width (length "Tag (Name)"))
         (col2-width (length "Value")))
    
    (when (and trimmed-message
               (not (string-empty-p trimmed-message))
               (string-match-p "\\`8=FIX" trimmed-message)
               (string-match-p "|9=" trimmed-message)
               (string-match-p "|10=" trimmed-message))

      ;; Use a regex for separators to handle pipes, newlines, etc.
      ;; The 't' argument omits empty strings from the result.
      (let ((pairs (split-string trimmed-message "[|\n\r]+" t)))
        (dolist (pair pairs)
          (let* ((tag-val (split-string pair "="))
                 (tag (car tag-val))
                 (val (cadr tag-val)))
            (when (and tag val)
              (let* ((tag-name (gethash tag fix-parser/fix-tag-dictionary-4.4 "Unknown Tag"))
                     (col1-str (format "%s (%s)" tag tag-name)))
                (push (list col1-str val) parsed-data)
                ;; Update max widths
                (setq col1-width (max col1-width (length col1-str)))
                (setq col2-width (max col2-width (length val))))))))
      (setq parsed-data (nreverse parsed-data))

      ;; Generate the formatted org-table string
      (when parsed-data
        (let ((table-content '()))
          (push (format "| %s | %s |" (fix-parser/my-pad-string-right "Tag (Name)" col1-width) (fix-parser/my-pad-string-right "Value" col2-width)) table-content)
          (push (format "|-%s-+-%s-|" (make-string col1-width ?-) (make-string col2-width ?-)) table-content)
          (dolist (row parsed-data)
            (push (format "| %s | %s |" (fix-parser/my-pad-string-right (car row) col1-width) (fix-parser/my-pad-string-right (cadr row) col2-width)) table-content))
          (string-join (nreverse table-content) "\n"))))))

(defun fix-parser/parse-fix-message ()
  "Parse FIX message(s) and display them as 'org-mode' tables.  If a region is active, parses the selected text
as a single message.  If no region is active, scans the entire buffer for messages starting with '8=FIX' and
parses each one.  The message is expected to use '|' as the field separator."
  (interactive)
  (let ((output-buffer-name "*fix-parse-result*")
        (tables '()))
    (if (use-region-p)
        (let* ((raw-message (buffer-substring-no-properties (region-beginning) (region-end)))
               (table (fix-parser/parse-fix--to-table-string raw-message)))
          (if table
              (push table tables)
            (message "The selected region does not contain a valid FIX message.")))
      (let* (
             (parts (split-string (buffer-string) "8=FIX" t))
             (potential-messages (mapcar (lambda (s) (concat "8=FIX" s)) parts)))
        (dolist (msg potential-messages)
          (let ((table (fix-parser/parse-fix--to-table-string msg)))
            (when table
              (push table tables))))))

    ;; Display the results
    (if (null tables)
        (message "No valid FIX messages found.")
      (with-current-buffer (get-buffer-create output-buffer-name)
        (erase-buffer)
        (insert (string-join (nreverse tables) "\n\n"))
        (when (fboundp 'org-mode)
          (goto-char (point-min))
          (org-mode)) ;; use built-in org-mode
        (display-buffer-in-side-window (current-buffer)
                                     '((side . right)
                                       (window-width . 0.5)))
        (message "Parsed %d FIX message(s)." (length tables))))))

(provide 'fix-parser)
